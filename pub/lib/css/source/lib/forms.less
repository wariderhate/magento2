// /**
// //  * Magento
//  *
//  * NOTICE OF LICENSE
//  *
//  * This source file is subject to the Academic Free License (AFL 3.0)
//  * that is bundled with this package in the file LICENSE_AFL.txt.
//  * It is also available through the world-wide-web at this URL:
//  * http://opensource.org/licenses/afl-3.0.php
//  * If you did not receive a copy of the license and are unable to
//  * obtain it through the world-wide-web, please send an email
//  * to license@magentocommerce.com so we can send you a copy immediately.
//  *
//  * DISCLAIMER
//  *
//  * Do not edit or add to this file if you wish to upgrade Magento to newer
//  * versions in the future. If you wish to customize Magento for your
//  * needs please refer to http://www.magentocommerce.com for more information.
//  *
//  * @category    design
//  * @copyright   Copyright (c) 2014 X.commerce, Inc. (http://www.magentocommerce.com)
//  * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
//  */

.form-element-input(
    @_type: @form-element-input-type,
    @_background: ~"@{@{_type}-background}",
    @_border: ~"@{@{_type}-border}",
    @_border-radius: ~"@{@{_type}-border-radius}",
    @_height: ~"@{@{_type}-height}",
    @_width: ~"@{@{_type}-width}",
    @_padding: ~"@{@{_type}-padding}",
    @_margin: ~"@{@{_type}-margin}",
    @_vertical-align: ~"@{@{_type}-vertical-align}",
    @_background-clip: ~"@{@{_type}-background-clip}",
    @_outline: ~"@{@{_type}-outline}",

    @_font-size:  ~"@{@{_type}-font-size}",
    @_color: ~"@{@{_type}-color}",
    @_font-family: ~"@{@{_type}-font-family}",
    @_font-weight: ~"@{@{_type}-font-weight}",
    @_line-height: ~"@{@{_type}-line-height}",
    @_font-style: ~"@{@{_type}-font-style}",

    @_placeholder-color: ~"@{@{_type}-placeholder-color}",
    @_placeholder-font-style: ~"@{@{_type}-placeholder-font-style}",

    @_disabled-background: ~"@{@{_type}-disabled-background}",
    @_disabled-border: ~"@{@{_type}-disabled-border}",
    @_disabled-opacity: ~"@{@{_type}-disabled-opacity}",
    @_disabled-color: ~"@{@{_type}-disabled-color}",
    @_disabled-font-style: ~"@{@{_type}-disabled-font-style}",

    @_focus-background: ~"@{@{_type}-focus-background}",
    @_focus-border: ~"@{@{_type}-focus-border}",
    @_focus-color: ~"@{@{_type}-focus-color}",
    @_focus-font-style: ~"@{@{_type}-focus-font-style}"
) {
    .box-sizing();
    .css(background, @_background);
    .css(border, @_border);
    .css(border-radius, @_border-radius);
    .css(height, @_height);
    .css(width, @_width);
    .css(padding, @_padding);
    .css(margin, @_margin);
    ._form-element-outline(@_outline);

    .css(font-size, @_font-size);
    .css(font-family, @_font-family);
    .css(font-weight, @_font-weight);
    .css(line-height, @_line-height);
    .css(font-style, @_font-style);
    .css(color, @_color);

    .css(background-clip, @_background-clip);
    .css(vertical-align, @_vertical-align);

    ._form-element-focus(
        @_background,
        @_focus-background,
        @_border,
        @_focus-border,
        @_color,
        @_focus-color,
        @_font-style,
        @_focus-font-style
    );

    ._form-element-disabled(
        @_background,
        @_disabled-background,
        @_border,
        @_disabled-border,
        @_color,
        @_disabled-color,
        @_font-style,
        @_disabled-font-style,
        @_disabled-opacity
    );

    ._form-element-placeholder(
        @_type,
        @_placeholder-color,
        @_font-style,
        @_placeholder-font-style
    );
}

.form-element-choice(
    @_type: @form-element-choice-type,
    @_vertical-align: ~"@{@{_type}-vertical-align}",
    @_margin: ~"@{@{_type}-margin}",
    @_disabled-opacity: ~"@{@{_type}-disabled-opacity}"
) {
    .css(vertical-align, @_vertical-align);
    .css(margin, @_margin);
    &:disabled {
        ._form-element-add-opacity(@_disabled-opacity);
    }
}

.form-element-number-reset() {
    &::-webkit-inner-spin-button,
    &::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    -moz-appearance: textfield;
}

.form-element-search-reset() {
    -webkit-appearance: none;
    &::-webkit-search-cancel-button,
    &::-webkit-search-decoration,
    &::-webkit-search-results-button,
    &::-webkit-search-results-decoration {
      -webkit-appearance:none;
    }
}

.form-element-textarea-resize(@_textarea-resize: @textarea-resize) {
    .css(resize, @_textarea-resize);
}

.form-element-color(
    @_border-color: '',
    @_background: '',
    @_color: '',
    @_focus-border-color: '',
    @_focus-background: '',
    @_focus-color: '',
    @_disabled-border-color: '',
    @_disabled-background: '',
    @_disabled-color: '',
    @_placeholder-color: ''
) {
    .css(border-color, @_border-color);
    .css(background, @_background);
    .css(color, @_color);
    &:focus {
        ._form-element-state-add-border-color(@_focus-border-color, @_border-color);
        ._form-element-state-add-background(@_focus-background, @_background);
        ._form-element-state-add-font-color(@_focus-color, @_color);
    }
    &:disabled {
        ._form-element-state-add-border-color(@_disabled-border-color, @_border-color);
        ._form-element-state-add-background(@_disabled-background, @_background);
        ._form-element-state-add-font-color(@_disabled-color, @_color);
    }
    &::-moz-placeholder {
        .css(color, @_placeholder-color);
    }
    &::-webkit-input-placeholder {
        .css(color, @_placeholder-color);
    }
    &:-ms-input-placeholder {
        .css(color, @_placeholder-color);
    }
}

.form-element-indent(
    @_margin: '',
    @_padding: ''
) {
    .css(margin, @_margin);
    .css(padding, @_padding);
}

.form-element-size(
    @_height: '',
    @_width: ''
) {
    .css(height, @_height);
    .css(width, @_width);
}

.form-validation(
    @_element-color-error: @form-element-validation-color-error,
    @_element-color-valid: @form-element-validation-color-valid,
    @_element-border-color-error: @form-element-validation-border-error,
    @_element-border-color-valid: @form-element-validation-border-valid,
    @_element-background-error: @form-element-validation-background-error,
    @_element-background-valid: @form-element-validation-background-valid
) {
    &.mage-error {
        .form-element-color(
            @_border-color: @_element-border-color-error,
            @_background: @_element-background-error,
            @_color: @_element-color-error
        );
    }
    &.valid {
        .form-element-color(
            @_border-color: @_element-border-color-valid,
            @_background: @_element-background-valid,
            @_color: @_element-color-valid
        );
    }
}

.form-validation-note(
    @_note-color: @form-validation-note-color-error,
    @_note-font-size: @form-validation-note-font-size,
    @_note-font-family: @form-validation-note-font-family,
    @_note-font-style: @form-validation-note-font-style,
    @_note-font-weight: @form-validation-note-font-weight,
    @_note-line-height: @form-validation-note-line-height,
    @_note-margin: @form-validation-note-margin,
    @_note-padding: @form-validation-note-padding,
    @_note-icon-use: @form-validation-note-icon-use,

    @_note-icon-font-content: @form-validation-note-icon-font-content,
    @_note-icon-font: @form-validation-note-icon-font,
    @_note-icon-font-size: @form-validation-note-icon-font-size,
    @_note-icon-font-line-height: @form-validation-note-icon-font-line-height,
    @_note-icon-font-color: @form-validation-note-icon-font-color,
    @_note-icon-font-color-hover: @form-validation-note-icon-font-color-hover,
    @_note-icon-font-color-active: @form-validation-note-icon-font-color-active,
    @_note-icon-font-margin: @form-validation-note-icon-font-margin,
    @_note-icon-font-vertical-align: @form-validation-note-icon-font-vertical-align,
    @_note-icon-font-position: @form-validation-note-icon-font-position,
    @_note-icon-font-text-hide: @form-validation-note-icon-font-text-hide
) {
    .typography(
        @_font-size: @_note-font-size,
        @_color: @_note-color,
        @_font-family: @_note-font-family,
        @_font-weight: @_note-font-weight,
        @_line-height: @_note-line-height,
        @_font-style: @_note-font-style
    );
    ._form-validation-icon(
        @_note-icon-use,
        @_note-icon-font-content,
        @_note-icon-font,
        @_note-icon-font-size,
        @_note-icon-font-line-height,
        @_note-icon-font-color,
        @_note-icon-font-color-hover,
        @_note-icon-font-color-active,
        @_note-icon-font-margin,
        @_note-icon-font-vertical-align,
        @_note-icon-font-position,
        @_note-icon-font-text-hide
    );
}

.form-validation-color(
    @_element-border-color-error: '',
    @_element-background-error: '',
    @_element-color-error: '',
    @_element-border-color-valid: '',
    @_element-background-valid: '',
    @_element-color-valid: ''
) {
    &.mage-error {
        .form-element-color(
            @_border-color: @_element-border-color-error,
            @_background: @_element-background-error,
            @_color: @_element-color-error
        );
    }
    &.valid {
        .form-element-color(
            @_border-color: @_element-border-color-valid,
            @_background: @_element-background-valid,
            @_color: @_element-color-valid
        );
    }
}


.form-element-all() {
    input[type="text"],
    input[type="password"],
    input[type="url"],
    input[type="tel"],
    input[type="search"],
    input[type="number"],
    input[type="datetime"],
    input[type="email"] {
        .form-element-input(@_type: input-text);
    }

    input[type="number"] {
        .form-element-number-reset();
    }

    input[type="search"] {
        .form-element-search-reset();
    }

    select {
        .form-element-input(@_type: select);
    }

    select[multiple="multiple"] {
        .add-height(auto);
    }

    textarea {
        .form-element-input(@_type: textarea);
        .form-element-textarea-resize();
    }

    input[type="checkbox"] {
        .form-element-choice(@_type: input-checkbox);
    }

    input[type="radio"] {
        .form-element-choice(@_type: input-radio);
    }

    input,
    select,
    textarea {
        .form-validation();
    }

    div.mage-error[generated] {
        .form-validation-note();
    }

    input[type="button"],
    input[type="reset"],
    input[type="submit"] {
        cursor: pointer;
        -webkit-appearance: button;
        *overflow: visible;
    }

    input::-moz-focus-inner {
        border: 0;
        padding: 0;
    }
}

//
// Internal use mixins
//--------------------------------------
._form-validation-icon(
    @_note-icon-use,
    @_note-icon-font-content,
    @_note-icon-font,
    @_note-icon-font-size,
    @_note-icon-font-line-height,
    @_note-icon-font-color,
    @_note-icon-font-color-hover,
    @_note-icon-font-color-active,
    @_note-icon-font-margin,
    @_note-icon-font-vertical-align,
    @_note-icon-font-position,
    @_note-icon-font-text-hide
) when (@_note-icon-use = true) {
    .icon-font(
        @_icon-font-content: @_note-icon-font-content,
        @_icon-font: @_note-icon-font,
        @_icon-font-size: @_note-icon-font-size,
        @_icon-font-line-height: @_note-icon-font-line-height,
        @_icon-font-color: @_note-icon-font-color,
        @_icon-font-color-hover: @_note-icon-font-color-hover,
        @_icon-font-color-active: @_note-icon-font-color-active,
        @_icon-font-margin: @_note-icon-font-margin,
        @_icon-font-vertical-align: @_note-icon-font-vertical-align,
        @_icon-font-position: @_note-icon-font-position,
        @_icon-font-text-hide: @_note-icon-font-text-hide
    );
}

._form-element-outline(@_form-element-outline) when (@_form-element-outline = false) {
    outline: none;
}

._form-element-add-opacity(@_opacity) when not (@_opacity = 1) {
    .css(opacity, @_opacity);
}

// Only for states :disabled, :focus, placeholder
._form-element-focus(
    @_background-default,
    @_background-state,
    @_border-default,
    @_border-state,
    @_color-default,
    @_color-state,
    @_font-style-default,
    @_font-style-state
) {
    &:focus {
        ._form-element-state-add-background(@_background-state, @_background-default);
        ._form-element-state-add-border(@_border-state, @_border-default);
        ._form-element-state-add-font-color(@_color-state, @_color-default);
        ._form-element-state-add-font-style(@_font-style-state, @_font-style-default);
    }
}

._form-element-disabled(
    @_background-default,
    @_background-state,
    @_border-default,
    @_border-state,
    @_color-default,
    @_color-state,
    @_font-style-default,
    @_font-style-state,
    @_opacity
) {
    &:disabled {
        ._form-element-add-opacity(@_opacity);
        ._form-element-state-add-background(@_background-state, @_background-default);
        ._form-element-state-add-border(@_border-state, @_border-default);
        ._form-element-state-add-font-color(@_color-state, @_color-default);
        ._form-element-state-add-font-style(@_font-style-state, @_font-style-default);
    }
}

._form-element-placeholder(
    @_type,
    @_color,
    @_font-style-default,
    @_font-style-state
) when not (@_type = select) {
    &::-moz-placeholder {
        .css(color, @_color);
        ._form-element-state-add-font-style(@_font-style-state, @_font-style-default);
    }
    &::-webkit-input-placeholder {
        .css(color, @_color);
        ._form-element-state-add-font-style(@_font-style-state, @_font-style-default);
    }
    &:-ms-input-placeholder {
        .css(color, @_color);
        ._form-element-state-add-font-style(@_font-style-state, @_font-style-default);
    }
}

._form-element-state-add-background(@_background-state, @_background-default) when not (@_background-state = @_background-default) {
    .css(background, @_background-state);
}

._form-element-state-add-border(@_border-state, @_border-default) when not ('@{_border-state}' = '@{_border-default}') {
    .css(border, @_border-state);
}

._form-element-state-add-border-color(@_border-state, @_border-default) when not (@_border-state = @_border-default) {
    .css(border-color, @_border-state);
}

._form-element-state-add-font-style(@_font-style-state, @_font-style-default) when not (@_font-style-state = @_font-style-default) {
    .css(font-style, @_font-style-state);
}

._form-element-state-add-font-color(@_color-state, @_color-default) when not (@_color-state = @_color-default) {
    .css(color, @_color-state);
}

.form-fieldset(
    @_border: @form-fieldset-border,
    @_margin: @form-fieldset-margin,
    @_padding: @form-fieldset-padding,
    @_legend-color: @form-fieldset-legend-color,
    @_legend-font-size: @form-fieldset-legend-font-size,
    @_legend-font-family: @form-fieldset-legend-font-family,
    @_legend-font-weight: @form-fieldset-legend-font-weight,
    @_legend-font-style: @form-fieldset-legend-font-style,
    @_legend-line-height: @form-fieldset-legend-line-height,
    @_legend-margin: @form-fieldset-legend-margin,
    @_legend-padding: @form-fieldset-legend-padding,
    @_legend-width: @form-fieldset-legend-width
) {
    .css(padding, @_padding);
    .css(margin, @_margin);
    .css(border, @_border);
    letter-spacing: -0.31em;
    word-spacing: -0.43em;

    > * {
        letter-spacing: normal;
        word-spacing: normal;
    }

    > .legend {
        .css(margin, @_legend-margin);
        .css(padding, @_legend-padding);
        .typography(
            @_font-size: @_legend-font-size,
            @_color: @_legend-color,
            @_font-family: @_legend-font-family,
            @_font-weight: @_legend-font-weight,
            @_line-height: @_legend-line-height,
            @_font-style: @_legend-font-style
        );
        .box-sizing();
        float: left;
        .css(width, @_legend-width);
        & + br {
            display: block;
            visibility: hidden;
            height: 0;
            overflow: hidden;
            clear: both;
        }
    }
}

.form-field(
    @_type: @form-field-type,
    @_border: @form-field-border,
    @_column: @form-field-column,
    @_column-padding: @form-field-column-padding,
    @_column-width: @form-field-column-width,
    @_type-block-margin: @form-field-type-block-margin,
    @_type-inline-margin: @form-field-type-inline-margin,

    @_label-color: @form-field-label-color,
    @_label-font-size: @form-field-label-font-size,
    @_label-font-family: @form-field-label-font-family,
    @_label-font-weight: @form-field-label-font-weight,
    @_label-font-style: @form-field-label-font-style,
    @_label-line-height: @form-field-label-line-height,
    @_type-block-label-margin: @form-field-type-block-label-margin,
    @_type-inline-label-padding: @form-field-type-inline-label-padding,
    @_type-inline-label-width: @form-field-type-inline-label-width,

    @_type-inline-control-width: @form-field-type-inline-control-width,

    @_label-asterisk-color: @form-field-label-asterisk-color,
    @_label-asterisk-font-size: @form-field-label-asterisk-font-size,
    @_label-asterisk-font-family: @form-field-label-asterisk-font-family,
    @_label-asterisk-font-weight: @form-field-label-asterisk-font-weight,
    @_label-asterisk-font-style: @form-field-label-asterisk-font-style,
    @_label-asterisk-line-height: @form-field-label-asterisk-line-height,
    @_label-asterisk-margin: @form-field-label-asterisk-margin,

    @_note-color: @form-field-note-color,
    @_note-font-size: @form-field-note-font-size,
    @_note-font-family: @form-field-note-font-family,
    @_note-font-weight: @form-field-note-font-weight,
    @_note-line-height: @form-field-note-line-height,
    @_note-font-style: @form-field-note-font-style,
    @_note-margin: @form-field-note-margin,
    @_note-padding: @form-field-note-padding,
    @_note-icon-font-content: @form-field-note-icon-font-content,
    @_note-icon-font: @form-field-note-icon-font,
    @_note-icon-font-size: @form-field-note-icon-font-size,
    @_note-icon-font-line-height: @form-field-note-icon-font-line-height,
    @_note-icon-font-color: @form-field-note-icon-font-color,
    @_note-icon-font-color-hover: @form-field-note-icon-font-color-hover,
    @_note-icon-font-color-active: @form-field-note-icon-font-color-active,
    @_note-icon-font-margin: @form-field-note-icon-font-margin,
    @_note-icon-font-vertical-align: @form-field-note-icon-font-vertical-align,
    @_note-icon-font-position: @form-field-note-icon-font-position,
    @_note-icon-font-text-hide: @form-field-note-icon-font-text-hide
) {
    ._form-field-type(
            @_type,
            @_type-block-margin,
            @_type-inline-margin,
            @_type-block-label-margin,
            @_type-inline-label-padding,
            @_type-inline-label-width,
            @_type-inline-control-width
        );
    ._form-field-column(
        @_column,
        @_column-padding,
        @_column-width
    );

    .css(border, @_border);

    > .label {
        .typography(
            @_font-size: @_label-font-size,
            @_color: @_label-color,
            @_font-family: @_label-font-family,
            @_font-weight: @_label-font-weight,
            @_line-height: @_label-line-height,
            @_font-style: @_label-font-style
        );
        & + br {
            display: none;
        }
    }

    &.required > .label:after {
        content: '*';
        .typography(
            @_font-size: @_label-asterisk-font-size,
            @_color: @_label-asterisk-color,
            @_font-family: @_label-asterisk-font-family,
            @_font-weight: @_label-asterisk-font-weight,
            @_line-height: @_label-asterisk-line-height,
            @_font-style: @_label-asterisk-font-style
        );
        .css(margin, @_label-asterisk-margin);
    }

    .nested .field {
        margin: 5px 0;
    }

    &.choice {
        > .label {
            display: inline;
        }
        > input {
            vertical-align: top;
        }
    }

    .fields.group {
        display: flex;
        letter-spacing: -0.31em; // webkit
        *letter-spacing: normal; // reset IE < 8
        word-spacing: -0.43em; // IE < 8 && gecko
        margin-right: - extract(@_column-padding, 2);
        & > * {
            letter-spacing: normal;
            word-spacing: normal;
        }
        .field {
            .box-sizing();
            vertical-align: top;
            margin: 0 !important;
            &.no-label:before {
                display: none;
            }
            .label {
                width: auto;
                float: none;
                text-align: left;
                padding-right: 0;
            }
            .control {
                float: none;
                width: auto;
            }
        }
        &.group-2 .field {
            width: 50% !important;
            display: inline-block;
        }
        &.group-3 .field {
            width: 33.3% !important;
            display: inline-block;
        }
        &.group-4 .field {
            width: 25% !important;
            display: inline-block;
        }
        &.group-5 .field {
            width: 20% !important;
            display: inline-block;
        }
    }

    .addon {
        display: inline-flex;
        flex-wrap: nowrap;
        padding: 0;
        width: 100%;
        textarea,
        select,
        input {
            order: 2;
            box-shadow: none;
            display: inline-block;
            margin: 0;
            width: auto;
            flex-basis: 100%;
        }
        .addbefore,
        .addafter {
            order:3;
            display: inline-block;
            .form-element-input(@_type: input-text);
            width: auto;
            white-space: nowrap;
            vertical-align: middle;
        }
        .addbefore {
            float:left;
            order:1;
        }
    }

    ._form-field-note(
        @_note-font-size,
        @_note-color,
        @_note-font-family,
        @_note-font-weight,
        @_note-line-height,
        @_note-font-style,
        @_note-margin,
        @_note-padding,

        @_note-icon-font-content,
        @_note-icon-font,
        @_note-icon-font-size,
        @_note-icon-font-line-height,
        @_note-icon-font-color,
        @_note-icon-font-color-hover,
        @_note-icon-font-color-active,
        @_note-icon-font-margin,
        @_note-icon-font-vertical-align,
        @_note-icon-font-position,
        @_note-icon-font-text-hide
    );
}

.form-field-type-revert(
    @_type: @form-field-type-revert,
    @_type-block-margin: @form-field-type-block-margin,
    @_type-inline-margin: @form-field-type-inline-margin,
    @_type-block-label-margin: @form-field-type-block-label-margin,
    @_type-inline-label-padding: @form-field-type-inline-label-padding,
    @_type-inline-label-width: @form-field-type-inline-label-width,
    @_type-inline-control-width: @form-field-type-inline-control-width
) when (@_type = block) and not (@_type = false) {
    ._form-field-type-block(
        @_type-block-margin,
        @_type-block-label-margin
    );
}

.form-field-type-revert(
    @_type: @form-field-type-revert,
    @_type-block-margin: @form-field-type-block-margin,
    @_type-inline-margin: @form-field-type-inline-margin,
    @_type-block-label-margin: @form-field-type-block-label-margin,
    @_type-inline-label-padding: @form-field-type-inline-label-padding,
    @_type-inline-label-width: @form-field-type-inline-label-width,
    @_type-inline-control-width: @form-field-type-inline-control-width
) when (@_type = inline) and not (@_type = false) {
    ._form-field-type-inline(
        @_type-inline-margin,
        @_type-inline-label-padding,
        @_type-inline-label-width,
        @_type-inline-control-width
    );
    .fields.group {
        .field {
            .label {
                width: auto;
                float: none;
                padding-right: 0;
            }
            .control {
                float: none;
                width: auto;
            }
        }
    }
}

._form-field-note(
    @_note-font-size,
    @_note-color,
    @_note-font-family,
    @_note-font-weight,
    @_note-line-height,
    @_note-font-style,
    @_note-margin,
    @_note-padding,

    @_note-icon-font-content,
    @_note-icon-font,
    @_note-icon-font-size,
    @_note-icon-font-line-height,
    @_note-icon-font-color,
    @_note-icon-font-color-hover,
    @_note-icon-font-color-active,
    @_note-icon-font-margin,
    @_note-icon-font-vertical-align,
    @_note-icon-font-position,
    @_note-icon-font-text-hide
) {
    .note {
        .typography(
            @_font-size: @_note-font-size,
            @_color: @_note-color,
            @_font-family: @_note-font-family,
            @_font-weight: @_note-font-weight,
            @_line-height: @_note-line-height,
            @_font-style: @_note-font-style
        );
        .add-margin(@_note-margin);
        .add-padding(@_note-padding);
        .icon-font(
            @_icon-font-content: @_note-icon-font-content,
            @_icon-font: @_note-icon-font,
            @_icon-font-size: @_note-icon-font-size,
            @_icon-font-line-height: @_note-icon-font-line-height,
            @_icon-font-color: @_note-icon-font-color,
            @_icon-font-color-hover: @_note-icon-font-color-hover,
            @_icon-font-color-active: @_note-icon-font-color-active,
            @_icon-font-margin: @_note-icon-font-margin,
            @_icon-font-vertical-align: @_note-icon-font-vertical-align,
            @_icon-font-position: @_note-icon-font-position,
            @_icon-font-text-hide: @_note-icon-font-text-hide
        );
    }
}

._form-field-type(
    @_type,
    @_type-block-margin,
    @_type-inline-margin,
    @_type-block-label-margin,
    @_type-inline-label-padding,
    @_type-inline-label-width,
    @_type-inline-control-width
) when (@_type = inline) {
    ._form-field-type-inline(
        @_type-inline-margin,
        @_type-inline-label-padding,
        @_type-inline-label-width,
        @_type-inline-control-width
    );
}

._form-field-type(
    @_type,
    @_type-block-margin,
    @_type-inline-margin,
    @_type-block-label-margin,
    @_type-inline-label-padding,
    @_type-inline-label-width,
    @_type-inline-control-width
) when (@_type = block) {
    ._form-field-type-block(
        @_type-block-margin,
        @_type-block-label-margin
    );
}

._form-field-type-inline(
    @_type-inline-margin,
    @_type-inline-label-padding,
    @_type-inline-label-width,
    @_type-inline-control-width
) {
    .box-sizing();
    .clearfix();
    .css(margin, @_type-inline-margin);
    &:not(.choice) > .label {
        .box-sizing();
        float: left;
        text-align: right;
        .css(width, @_type-inline-label-width);
        .css(padding, @_type-inline-label-padding);
    }

    > .description {
        .box-sizing();
        float: left;
        text-align: right;
        .css(width, @_type-inline-label-width);
        .css(padding, @_type-inline-label-padding);
    }

    &.choice:before,
    &.no-label:before {
        .box-sizing();
        content: " ";
        height: 1px;
        float: left;
        .css(width, @_type-inline-label-width);
        .css(padding, @_type-inline-label-padding);
    }

    > .control {
        float: left;
        .css(width, @_type-inline-control-width);
    }
}

._form-field-type-block(
    @_type-block-margin,
    @_type-block-label-margin
) {
    .css(margin, @_type-block-margin);
    &:not(.choice) > .label {
        display: inline-block;
        width: auto;
        float: none;
        text-align: left;
        .css(margin, @_type-block-label-margin);
    }

    &.choice:before,
    &.no-label:before {
      .box-sizing();
      content: " ";
      height: auto;
      float: none;
      width: auto;
      .add-padding(0);
    }

    > .control {
        float: none;
        width: auto;
    }
}

._form-field-column(
    @_column,
    @_column-padding,
    @_column-width
) when (@_column = true) {
    .box-sizing();
    display: inline-block;
    .css(padding, @_column-padding);
    .css(width, @_column-width);
    vertical-align: top;

    .nested .field { // todo
        width: 100%;
    }
}

.form-hasrequired(
    @_position: @form-hasrequired-position,
    @_color: @form-hasrequired-color,
    @_font-size: @form-hasrequired-font-size,
    @_font-family: @form-hasrequired-font-family,
    @_font-weight: @form-hasrequired-font-weight,
    @_font-style: @form-hasrequired-font-style,
    @_line-height: @form-hasrequired-line-height,
    @_border: @form-hasrequired-border,
    @_margin: @form-hasrequired-margin,
    @_padding: @form-hasrequired-padding
) {
    ._form-hasrequired-position(
        @_position,
        @_border,
        @_margin,
        @_padding,
        @_font-size,
        @_color,
        @_font-family,
        @_font-weight,
        @_line-height,
        @_font-style
    );
}

._form-hasrequired-position(
    @_position,
    @_border,
    @_margin,
    @_padding,
    @_font-size,
    @_color,
    @_font-family,
    @_font-weight,
    @_line-height,
    @_font-style
) when (@_position = top) {
    &:before {
        ._form-hasrequired-position-any(
            @_border,
            @_margin,
            @_padding,
            @_font-size,
            @_color,
            @_font-family,
            @_font-weight,
            @_line-height,
            @_font-style
        );
    }

}

._form-hasrequired-position(
    @_position,
    @_border,
    @_margin,
    @_padding,
    @_font-size,
    @_color,
    @_font-family,
    @_font-weight,
    @_line-height,
    @_font-style
) when (@_position = bottom) {
    &:after {
        ._form-hasrequired-position-any(
            @_border,
            @_margin,
            @_padding,
            @_font-size,
            @_color,
            @_font-family,
            @_font-weight,
            @_line-height,
            @_font-style
        );
    }
}

._form-hasrequired-position-any(
    @_border,
    @_margin,
    @_padding,
    @_font-size,
    @_color,
    @_font-family,
    @_font-weight,
    @_line-height,
    @_font-style
) {
    content: attr(data-hasrequired);
    display: block;
    .typography(
        @_font-size: @_font-size,
        @_color: @_color,
        @_font-family: @_font-family,
        @_font-weight: @_font-weight,
        @_line-height: @_line-height,
        @_font-style: @_font-style
    );
    .css(border, @_border);
    .css(margin, @_margin);
    .css(padding, @_padding);

    letter-spacing: normal;
    word-spacing: normal;
}
